<!doctype html>
<html lang="en" data-theme="light" data-theme-variant="warm">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>[WIP] WYSIWYG Editor - Monochrome Edge</title>

        <!-- Favicon -->
        <link rel="icon" type="image/svg+xml" href="assets/favicon.svg" />

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />

        <!-- Monochrome Edge CSS -->
        <script>
            const isLocal =
                window.location.hostname === "localhost" ||
                window.location.hostname === "127.0.0.1" ||
                window.location.hostname === "";

            if (isLocal) {
                document.write(
                    '<link rel="stylesheet" href="../ui/monochrome-edge.css">',
                );
                document.write(
                    '<link rel="stylesheet" href="../ui/components/editor/styles/editor.css">',
                );
            } else {
                // For GitHub Pages, use relative path to built CSS
                document.write(
                    '<link rel="stylesheet" href="../dist/monochrome.min.css">',
                );
                document.write(
                    '<link rel="stylesheet" href="../dist/editor.min.css">',
                );
            }
        </script>

        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family:
                    "Inter",
                    -apple-system,
                    BlinkMacSystemFont,
                    "Segoe UI",
                    sans-serif;
                background-color: var(--theme-bg);
                color: var(--theme-text-primary);
                display: flex;
                flex-direction: column;
                height: 100vh;
                overflow: hidden;
            }

            /* Header */
            .editor-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 1rem 1.5rem;
                background: var(--theme-surface);
                border-bottom: 1px solid var(--theme-border);
            }

            .editor-title {
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .editor-title h1 {
                font-size: 1.25rem;
                font-weight: 600;
            }

            .back-link {
                color: var(--theme-text-secondary);
                text-decoration: none;
                font-size: 0.875rem;
                transition: color 0.2s;
            }

            .back-link:hover {
                color: var(--theme-text-primary);
            }

            .editor-actions {
                display: flex;
                gap: 0.75rem;
            }

            /* Editor Container */
            .editor-container {
                flex: 1;
                display: flex;
                overflow: hidden;
            }

            /* Main Editor Area */
            .editor-main {
                flex: 1;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            /* Toolbar */
            .editor-toolbar {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                padding: 0.75rem 1.5rem;
                background: var(--theme-surface);
                border-bottom: 1px solid var(--theme-border);
                flex-wrap: wrap;
            }

            .toolbar-group {
                display: flex;
                gap: 0.25rem;
                padding-right: 0.75rem;
                border-right: 1px solid var(--theme-border);
            }

            .toolbar-group:last-child {
                border-right: none;
            }

            .toolbar-btn {
                padding: 0.5rem;
                background: transparent;
                border: 1px solid transparent;
                border-radius: 4px;
                color: var(--theme-text-primary);
                cursor: pointer;
                transition: all 0.2s;
                font-size: 0.875rem;
                display: flex;
                align-items: center;
                gap: 0.25rem;
            }

            .toolbar-btn:hover {
                background: var(--theme-bg);
                border-color: var(--theme-border);
            }

            .toolbar-btn.active {
                background: var(--theme-highlight);
                color: white;
            }

            /* Editor Content */
            .editor-content {
                flex: 1;
                padding: 2rem;
                overflow-y: auto;
                background: var(--theme-bg);
            }

            .editor-wrapper {
                max-width: 800px;
                margin: 0 auto;
                background: var(--theme-surface);
                border: 1px solid var(--theme-border);
                border-radius: 8px;
                min-height: 500px;
                padding: 2rem;
            }

            #editor {
                outline: none;
                min-height: 400px;
            }

            #editor:empty:before {
                content: attr(data-placeholder);
                color: var(--theme-text-secondary);
                font-style: italic;
            }

            /* Formatting Styles */
            #editor h1 {
                font-size: 2rem;
                font-weight: 700;
                margin: 1.5rem 0 1rem;
                line-height: 1.2;
            }

            #editor h2 {
                font-size: 1.5rem;
                font-weight: 600;
                margin: 1.25rem 0 0.75rem;
                line-height: 1.3;
            }

            #editor h3 {
                font-size: 1.25rem;
                font-weight: 600;
                margin: 1rem 0 0.5rem;
            }

            #editor p {
                margin: 0.75rem 0;
                line-height: 1.7;
            }

            #editor strong {
                font-weight: 600;
            }

            #editor em {
                font-style: italic;
            }

            #editor u {
                text-decoration: underline;
            }

            #editor ul,
            #editor ol {
                margin: 0.75rem 0;
                padding-left: 2rem;
            }

            #editor li {
                margin: 0.25rem 0;
            }

            #editor blockquote {
                margin: 1rem 0;
                padding: 1rem 1.5rem;
                border-left: 3px solid var(--theme-highlight);
                background: var(--theme-bg);
                font-style: italic;
            }

            #editor pre {
                margin: 1rem 0;
                padding: 1rem;
                background: var(--theme-bg);
                border: 1px solid var(--theme-border);
                border-radius: 4px;
                overflow-x: auto;
                font-family: "Monaco", "Courier New", monospace;
                font-size: 0.875rem;
            }

            #editor code {
                padding: 0.125rem 0.25rem;
                background: var(--theme-bg);
                border-radius: 3px;
                font-family: "Monaco", "Courier New", monospace;
                font-size: 0.875rem;
            }

            #editor a {
                color: var(--theme-highlight);
                text-decoration: underline;
            }

            /* Sidebar */
            .editor-sidebar {
                width: 300px;
                background: var(--theme-surface);
                border-left: 1px solid var(--theme-border);
                padding: 1.5rem;
                overflow-y: auto;
            }

            .sidebar-section {
                margin-bottom: 2rem;
            }

            .sidebar-title {
                font-size: 0.875rem;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.05em;
                color: var(--theme-text-secondary);
                margin-bottom: 1rem;
            }

            .word-count {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }

            .count-item {
                display: flex;
                justify-content: space-between;
                font-size: 0.875rem;
            }

            .count-label {
                color: var(--theme-text-secondary);
            }

            .count-value {
                font-weight: 600;
            }

            /* Theme Toggle - uses icon-btn from monochrome-edge.css */
            .theme-toggle-group {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            /* Responsive */
            @media (max-width: 1024px) {
                .editor-sidebar {
                    display: none;
                }
            }

            @media (max-width: 768px) {
                .editor-toolbar {
                    padding: 0.5rem;
                }

                .toolbar-group {
                    padding-right: 0.5rem;
                }

                .editor-content {
                    padding: 1rem;
                }

                .editor-wrapper {
                    padding: 1rem;
                }
            }
        </style>
    </head>
    <body>
        <!-- Header -->
        <header class="editor-header">
            <div class="editor-title">
                <a href="index.html" class="back-link">← Back</a>
                <h1>[WIP] WYSIWYG Editor</h1>
            </div>
            <div class="editor-actions">
                <button class="btn btn-ghost btn-small" onclick="clearEditor()">
                    Clear
                </button>
                <button
                    class="btn btn-primary btn-small"
                    onclick="saveContent()"
                >
                    Save
                </button>
            </div>
        </header>

        <!-- Editor Container -->
        <div class="editor-container">
            <!-- Main Editor -->
            <main class="editor-main">
                <!-- Toolbar -->
                <div class="editor-toolbar">
                    <div class="toolbar-group">
                        <button
                            class="toolbar-btn"
                            onclick="formatText('bold')"
                            title="Bold (Ctrl+B)"
                        >
                            <strong>B</strong>
                        </button>
                        <button
                            class="toolbar-btn"
                            onclick="formatText('italic')"
                            title="Italic (Ctrl+I)"
                        >
                            <em>I</em>
                        </button>
                        <button
                            class="toolbar-btn"
                            onclick="formatText('underline')"
                            title="Underline (Ctrl+U)"
                        >
                            <u>U</u>
                        </button>
                    </div>

                    <div class="toolbar-group">
                        <button
                            class="toolbar-btn"
                            onclick="formatBlock('h1')"
                            title="Heading 1"
                        >
                            H1
                        </button>
                        <button
                            class="toolbar-btn"
                            onclick="formatBlock('h2')"
                            title="Heading 2"
                        >
                            H2
                        </button>
                        <button
                            class="toolbar-btn"
                            onclick="formatBlock('h3')"
                            title="Heading 3"
                        >
                            H3
                        </button>
                        <button
                            class="toolbar-btn"
                            onclick="formatBlock('p')"
                            title="Paragraph"
                        >
                            P
                        </button>
                    </div>

                    <div class="toolbar-group">
                        <button
                            class="toolbar-btn"
                            onclick="formatText('insertUnorderedList')"
                            title="Bullet List"
                        >
                            • List
                        </button>
                        <button
                            class="toolbar-btn"
                            onclick="formatText('insertOrderedList')"
                            title="Numbered List"
                        >
                            1. List
                        </button>
                    </div>

                    <div class="toolbar-group">
                        <button
                            class="toolbar-btn"
                            onclick="insertLink()"
                            title="Insert Link"
                        >
                            🔗 Link
                        </button>
                        <button
                            class="toolbar-btn"
                            onclick="formatBlock('blockquote')"
                            title="Quote"
                        >
                            " Quote
                        </button>
                        <button
                            class="toolbar-btn"
                            onclick="insertCode()"
                            title="Code Block"
                        >
                            &lt;/&gt; Code
                        </button>
                    </div>
                </div>

                <!-- Content -->
                <div class="editor-content">
                    <div class="editor-wrapper">
                        <div
                            id="editor"
                            contenteditable="true"
                            data-placeholder="Start typing..."
                        >
                            <h1>Welcome to Monochrome Edge Editor</h1>
                            <p>
                                This is a modern WYSIWYG editor built with pure
                                CSS and vanilla JavaScript. Try formatting text,
                                creating lists, or adding links!
                            </p>

                            <h2>Features</h2>
                            <ul>
                                <li>
                                    <strong>Rich text formatting</strong> -
                                    Bold, italic, underline
                                </li>
                                <li><strong>Headings</strong> - H1, H2, H3</li>
                                <li>
                                    <strong>Lists</strong> - Bullet and numbered
                                    lists
                                </li>
                                <li>
                                    <strong>Links and quotes</strong> - Add
                                    hyperlinks and blockquotes
                                </li>
                                <li>
                                    <strong>Theme support</strong> - Warm/Cold
                                    themes with light/dark modes
                                </li>
                            </ul>

                            <h2>Try It Out</h2>
                            <p>
                                Select text and use the toolbar above to format
                                it. You can also use keyboard shortcuts:
                            </p>
                            <ul>
                                <li><strong>Ctrl+B</strong> - Bold</li>
                                <li><strong>Ctrl+I</strong> - Italic</li>
                                <li><strong>Ctrl+U</strong> - Underline</li>
                            </ul>

                            <blockquote>
                                "The best writing is rewriting." - E.B. White
                            </blockquote>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Sidebar -->
            <aside class="editor-sidebar">
                <!-- Word Count -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Statistics</h3>
                    <div class="word-count">
                        <div class="count-item">
                            <span class="count-label">Words:</span>
                            <span class="count-value" id="wordCount">0</span>
                        </div>
                        <div class="count-item">
                            <span class="count-label">Characters:</span>
                            <span class="count-value" id="charCount">0</span>
                        </div>
                        <div class="count-item">
                            <span class="count-label">Paragraphs:</span>
                            <span class="count-value" id="paraCount">0</span>
                        </div>
                    </div>
                </div>

                <!-- Theme Controls -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Theme</h3>
                    <div class="theme-toggle-group">
                        <div>
                            <label
                                class="label-small"
                                style="
                                    margin-bottom: 0.5rem;
                                    display: block;
                                    font-size: 0.75rem;
                                    color: var(--theme-text-secondary);
                                "
                                >Variant</label
                            >
                            <div class="icon-btn-group">
                                <button
                                    class="icon-btn theme-btn active"
                                    onclick="setThemeVariant('warm')"
                                    id="warmBtn"
                                    title="Warm Theme"
                                >
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    >
                                        <path
                                            d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"
                                        />
                                    </svg>
                                </button>
                                <button
                                    class="icon-btn theme-btn"
                                    onclick="setThemeVariant('cold')"
                                    id="coldBtn"
                                    title="Cold Theme"
                                >
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    >
                                        <line x1="2" x2="22" y1="12" y2="12" />
                                        <line x1="12" x2="12" y1="2" y2="22" />
                                        <path d="m20 16-4-4 4-4" />
                                        <path d="m4 8 4 4-4 4" />
                                        <path d="m16 4-4 4-4-4" />
                                        <path d="m8 20 4-4 4 4" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div>
                            <label
                                class="label-small"
                                style="
                                    margin-bottom: 0.5rem;
                                    display: block;
                                    font-size: 0.75rem;
                                    color: var(--theme-text-secondary);
                                "
                                >Mode</label
                            >
                            <div class="icon-btn-group">
                                <button
                                    class="icon-btn mode-btn active"
                                    onclick="setThemeMode('light')"
                                    id="lightBtn"
                                    title="Light Mode"
                                >
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    >
                                        <circle cx="12" cy="12" r="4" />
                                        <path d="M12 2v2" />
                                        <path d="M12 20v2" />
                                        <path d="m4.93 4.93 1.41 1.41" />
                                        <path d="m17.66 17.66 1.41 1.41" />
                                        <path d="M2 12h2" />
                                        <path d="M20 12h2" />
                                        <path d="m6.34 17.66-1.41 1.41" />
                                        <path d="m19.07 4.93-1.41 1.41" />
                                    </svg>
                                </button>
                                <button
                                    class="icon-btn mode-btn"
                                    onclick="setThemeMode('dark')"
                                    id="darkBtn"
                                    title="Dark Mode"
                                >
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    >
                                        <path
                                            d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"
                                        />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Info -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">About</h3>
                    <p
                        style="
                            font-size: 0.875rem;
                            color: var(--theme-text-secondary);
                            line-height: 1.6;
                        "
                    >
                        A lightweight WYSIWYG editor demonstrating Monochrome
                        Edge's design system and theming capabilities.
                    </p>
                </div>
            </aside>
        </div>

        <script>
            const editor = document.getElementById("editor");

            // Format text commands
            function formatText(command) {
                document.execCommand(command, false, null);
                editor.focus();
            }

            // Format block commands
            function formatBlock(tag) {
                document.execCommand("formatBlock", false, tag);
                editor.focus();
            }

            // Insert link
            function insertLink() {
                const url = prompt("Enter URL:");
                if (url) {
                    document.execCommand("createLink", false, url);
                }
                editor.focus();
            }

            // Insert code block
            function insertCode() {
                const code = prompt("Enter code:");
                if (code) {
                    const pre = document.createElement("pre");
                    const codeEl = document.createElement("code");
                    codeEl.textContent = code;
                    pre.appendChild(codeEl);

                    const selection = window.getSelection();
                    if (selection.rangeCount) {
                        const range = selection.getRangeAt(0);
                        range.deleteContents();
                        range.insertNode(pre);
                    }
                }
                editor.focus();
            }

            // Clear editor
            function clearEditor() {
                if (confirm("Clear all content?")) {
                    editor.innerHTML = "<p><br></p>";
                    updateStats();
                }
            }

            // Save content
            function saveContent() {
                const content = editor.innerHTML;
                localStorage.setItem("editorContent", content);
                alert("Content saved!");
            }

            // Load content
            function loadContent() {
                const saved = localStorage.getItem("editorContent");
                if (saved) {
                    // Keep default content, don't override
                }
            }

            // Update statistics
            function updateStats() {
                const text = editor.innerText;
                const words = text
                    .trim()
                    .split(/\s+/)
                    .filter((w) => w.length > 0).length;
                const chars = text.length;
                const paras = editor.querySelectorAll("p, h1, h2, h3").length;

                document.getElementById("wordCount").textContent = words;
                document.getElementById("charCount").textContent = chars;
                document.getElementById("paraCount").textContent = paras;
            }

            // Theme controls
            function setThemeVariant(variant) {
                document.documentElement.setAttribute(
                    "data-theme-variant",
                    variant,
                );
                document
                    .getElementById("warmBtn")
                    .classList.toggle("active", variant === "warm");
                document
                    .getElementById("coldBtn")
                    .classList.toggle("active", variant === "cold");
            }

            function setThemeMode(mode) {
                document.documentElement.setAttribute("data-theme", mode);
                document
                    .getElementById("lightBtn")
                    .classList.toggle("active", mode === "light");
                document
                    .getElementById("darkBtn")
                    .classList.toggle("active", mode === "dark");
            }

            // Keyboard shortcuts
            editor.addEventListener("keydown", (e) => {
                if (e.ctrlKey || e.metaKey) {
                    switch (e.key.toLowerCase()) {
                        case "b":
                            e.preventDefault();
                            formatText("bold");
                            break;
                        case "i":
                            e.preventDefault();
                            formatText("italic");
                            break;
                        case "u":
                            e.preventDefault();
                            formatText("underline");
                            break;
                    }
                }
            });

            // Update stats on input
            editor.addEventListener("input", updateStats);

            // Initialize
            loadContent();
            updateStats();
        </script>
    </body>
</html>
